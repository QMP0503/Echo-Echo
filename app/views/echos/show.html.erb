<%= turbo_stream_from current_classroom, "echos" %>

<main class="container mb-xxxxl">
  <%= link_to sanitize("&larr; Back to echoes"), echos_path %>

  <div class="header">
    <h1>
      <%= @echo.name %>
    </h1>

  <%= link_to "New date",
              new_echo_echo_date_path(@echo),
              data: { turbo_frame: nested_dom_id(@echo, EchoDate.new) },
              class: "btn btn--primary" %>
  </div>

  <%= turbo_frame_tag nested_dom_id(@echo, EchoDate.new) %>
  <%= turbo_frame_tag nested_dom_id(@echo, "echo_dates") do %>
    <%= render @echo_dates, echo: @echo %>
  <% end %>
</main>

<%= turbo_frame_tag dom_id(@echo, :total) do %>
  <%= render "echos/total", echo: @echo %>
<% end %>