<%# Step 1: remove the form from the Echo#show page %>
<%= turbo_stream.update nested_dom_id(@echo, EchoDate.new), "" %>

<%# Step 2: add the date at the right place %>
<% if previous_date = @echo_date.previous_date %>
  <%= turbo_stream.after nested_dom_id(@echo, previous_date) do %>
    <%= render @echo_date, echo: @echo %>
  <% end %>
<% else %>
  <%= turbo_stream.prepend nested_dom_id(@echo, "echo_dates") do %>
    <%= render @echo_date, echo: @echo %>
  <% end %>
<% end %>

<%# Step 3: update the total count %>
<%= turbo_stream.update dom_id(@echo, :total) do %>
  <%= render "echos/total", echo: @echo %>
<% end %>

<%= render_turbo_stream_flash_messages %>
